# **AWS Config ‚Äì Complete Notes with Examples**  

## **Introduction to AWS Config**  
AWS Config is a service that helps you **monitor, audit, and assess the configuration** of your AWS resources. It records the current state of resources, tracks changes over time, and helps ensure compliance with best practices and regulatory standards.  

### **Why Use AWS Config?**  
- To **track configuration changes** in AWS resources.  
- To **audit historical configurations** and troubleshoot issues.  
- To **ensure compliance** with security policies and regulatory requirements.  
- To **get alerts when configurations deviate** from the expected setup.  

---

## **How AWS Config Works**  
AWS Config continuously monitors your AWS environment and maintains a history of configurations for supported resources.  

1. **Recording Configuration Changes**  
   - AWS Config takes a **snapshot** of the configuration of AWS resources in your account.  
   - It detects changes **whenever a resource is modified**, created, or deleted.  

2. **Storing Configuration History**  
   - Configuration changes are stored in **Amazon S3** for auditing purposes.  
   - You can also send configuration data to **Amazon SNS** to get alerts.  

3. **Compliance & Rules**  
   - AWS Config provides **managed rules** (predefined best practices) and **custom rules** (based on Lambda functions).  
   - It evaluates resources against rules and reports compliance status.  

4. **Change Notifications**  
   - AWS Config integrates with **AWS CloudTrail** and **Amazon SNS** to send alerts when a configuration change happens.  

---

## **Key Features of AWS Config**  

### **1. Resource Discovery & Tracking**  
- AWS Config automatically **discovers** and **monitors changes** in supported AWS resources.  
- Example: If someone changes a security group rule in EC2, AWS Config detects the change.  

### **2. Configuration History**  
- Stores **historical configurations**, making it easy to troubleshoot issues.  
- Example: If an S3 bucket was made **public**, you can check when and who made the change.  

### **3. Compliance Checks**  
- AWS Config can enforce security and compliance rules automatically.  
- Example: If a security group allows unrestricted SSH access (port 22 open to 0.0.0.0/0), AWS Config can **flag it as non-compliant**.  

### **4. AWS Config Rules**  
AWS Config evaluates resource configurations against rules. There are two types:  
1. **AWS Managed Rules**: Predefined rules created by AWS.  
2. **Custom Rules**: Created using AWS Lambda functions.  

Example Managed Rules:  
- `restricted-ssh`: Ensures that no security group allows SSH access from the internet.  
- `s3-bucket-public-read-prohibited`: Ensures that S3 buckets are not publicly readable.  

Example Custom Rule:  
- A Lambda function that checks if all EC2 instances have encryption enabled.  

### **5. Change Alerts**  
- AWS Config sends alerts via **Amazon SNS** when a configuration changes.  
- Example: If an IAM role is modified, AWS Config can notify the security team.  

---

## **AWS Config Components**  

| **Component**      | **Description** |
|--------------------|----------------|
| **Configuration Recorder** | Captures changes in AWS resources and stores them. |
| **Configuration Snapshot** | A point-in-time record of resource configurations. |
| **Configuration History** | A timeline of configuration changes for a resource. |
| **Config Rules** | Defines compliance policies (e.g., security best practices). |
| **Compliance Reports** | Provides compliance status for resources (compliant/non-compliant). |

---

## **Example Scenarios of AWS Config**  

### **Scenario 1: Auditing S3 Bucket Security**  
‚úÖ **Problem**: A company wants to ensure that no S3 bucket is publicly accessible.  
‚úÖ **Solution**: Use the AWS Config rule `s3-bucket-public-read-prohibited`.  
‚úÖ **Outcome**: If a bucket is public, AWS Config marks it as **non-compliant** and triggers an alert.  

---

### **Scenario 2: Tracking Security Group Changes**  
‚úÖ **Problem**: A security team wants to track changes in EC2 security groups.  
‚úÖ **Solution**: Enable AWS Config and set up alerts for security group changes.  
‚úÖ **Outcome**: If an open port (e.g., SSH `0.0.0.0/0`) is detected, AWS Config flags it.  

---

### **Scenario 3: Ensuring EC2 Instance Types Follow Standards**  
‚úÖ **Problem**: A company only allows `t3.micro` and `t3.small` instance types.  
‚úÖ **Solution**: Create a custom AWS Config rule that checks instance types.  
‚úÖ **Outcome**: If a larger instance type is launched, AWS Config marks it as **non-compliant**.  

---

## **AWS Config vs AWS CloudTrail**  
| Feature | AWS Config | AWS CloudTrail |
|---------|------------|---------------|
| Purpose | Tracks resource configurations over time. | Logs API activity in AWS. |
| Focus | Configuration history & compliance. | User & service activity logs. |
| Example Use Case | Checking if an S3 bucket was public. | Finding out who deleted an EC2 instance. |

---

## **How to Set Up AWS Config (Step-by-Step)**  

### **Step 1: Enable AWS Config**  
1. Open **AWS Management Console** ‚Üí Navigate to **AWS Config**.  
2. Click **"Get Started"**.  
3. Choose **resources to record** (e.g., EC2, S3, IAM).  
4. Select an **Amazon S3 bucket** for storing configuration history.  
5. Enable **SNS notifications** for alerts (optional).  
6. Click **"Confirm"** to start recording configurations.  

---

### **Step 2: Create a Config Rule**  
1. Go to **AWS Config** ‚Üí Click **"Rules"**.  
2. Click **"Add Rule"** ‚Üí Choose a **Managed Rule**.  
3. Example: Select `restricted-ssh` (ensures SSH is not open to the world).  
4. Click **"Save"**.  

---

### **Step 3: Monitor Compliance**  
1. Go to **AWS Config Dashboard**.  
2. Check **Compliance Status** of resources.  
3. If a rule fails, investigate the **non-compliant resources**.  

---

## **Pricing of AWS Config**  
AWS Config pricing depends on:  
- **Number of recorded configurations** per resource.  
- **Evaluations of AWS Config rules**.  
- **Storage costs** for configuration history (Amazon S3).  

üí∞ **Example Pricing**:  
- $0.003 per configuration recorded.  
- $0.001 per rule evaluation.  

---

## **When to Use AWS Config?**  

| **Use Case** | **Use AWS Config?** |
|-------------|------------------|
| Auditing resource changes | ‚úÖ Yes |
| Ensuring security compliance | ‚úÖ Yes |
| Tracking IAM role modifications | ‚úÖ Yes |
| Logging API calls | ‚ùå No (Use AWS CloudTrail) |

---

## **Conclusion**  
- AWS Config helps you **track, audit, and evaluate AWS resource configurations**.  
- It ensures **compliance with security policies** and detects misconfigurations.  
- It works alongside **AWS CloudTrail** for better security monitoring.  
- It provides **alerts** when configurations change.  

üîπ **Real-World Example**: If a company wants to enforce security policies (e.g., all EBS volumes must be encrypted), AWS Config can **automate compliance checks** and send alerts when issues arise.  

---

### **Next Steps**  
- Enable **AWS Config** in your AWS account.  
- Set up a few **Config rules** to track security policies.  
- Integrate AWS Config with **CloudTrail & SNS** for real-time alerts.  

---

# **How to Explain AWS Config in an Interview**  

**Interviewer:** What is AWS Config?  

### **1Ô∏è‚É£ Start with a Simple Definition**  
üîπ AWS Config is a service that helps track changes in AWS resources, check if they follow security rules, and audit configurations over time.

üìå **Think of it like a security camera** that keeps an eye on your AWS setup and tells you if something changes.  

---

**Interviewer:** Why do we need AWS Config?  

### **2Ô∏è‚É£ Explain the Problem It Solves**  
üîπ In AWS, we have many resources like EC2 instances, S3 buckets, and security groups. If someone accidentally makes a resource public or changes security settings, AWS Config helps track those changes and alerts us if something goes wrong.

üìå **Example**:  
- Suppose an S3 bucket was private yesterday but is now public.  
- AWS Config will **detect this change** and can alert your security team.  

---

**Interviewer:** How does AWS Config work?  

### **3Ô∏è‚É£ Explain the Working of AWS Config (Step-by-Step)**  
üîπ AWS Config works in three simple steps:

‚úÖ **1. Detects Changes:** It continuously watches AWS resources.  
‚úÖ **2. Stores History:** It keeps a record of past configurations.  
‚úÖ **3. Checks Compliance:** It compares resource settings against rules.  

üìå **Example**:  
- If your company policy says **'No security group should allow SSH (port 22) from anywhere'**, AWS Config will check every security group and report any violations.  

---

**Interviewer:** What are AWS Config Rules?  

### **4Ô∏è‚É£ Explain AWS Config Rules**  
üîπ AWS Config Rules help enforce security and compliance policies. There are two types:

1Ô∏è‚É£ **Managed Rules** (Pre-built by AWS)  
2Ô∏è‚É£ **Custom Rules** (Written using AWS Lambda)  

üìå **Example Managed Rule:**  
- `restricted-ssh` ‚Üí Ensures that **SSH (port 22) is not open to everyone (0.0.0.0/0).**  

üìå **Example Custom Rule:**  
- A Lambda function that checks if all EC2 instances have **encryption enabled.**  

---

**Interviewer:** How does AWS Config help in security?  

### **5Ô∏è‚É£ Explain Compliance & Alerts**  
üîπ AWS Config continuously checks your resources and marks them as either:
‚úÖ **Compliant** (Following the rules)  
‚ùå **Non-Compliant** (Breaking the rules)  

üìå **Example:**  
- If an **IAM role is modified** and now has admin access, AWS Config can detect it and **send an alert** via Amazon SNS.  

---

**Interviewer:** Can you give a real-world use case?  

### **6Ô∏è‚É£ Real-World Example**  
üîπ Let's say a bank is using AWS and must follow strict security policies. They use AWS Config to: 

1. Ensure **all EC2 instances are in a VPC** (No instances running in public networks).  
2. Ensure **all S3 buckets are private** (No public access).  
3. Detect if an **IAM policy suddenly grants full admin access**.  

üìå **Outcome:** If a security risk is found, AWS Config **flags it and sends an alert** so the DevOps team can fix it.  

---

**Interviewer:** How is AWS Config different from AWS CloudTrail?  

### **7Ô∏è‚É£ AWS Config vs. AWS CloudTrail**  
| Feature | AWS Config | AWS CloudTrail |
|---------|------------|---------------|
| Purpose | Tracks resource configurations | Logs API activity |
| Focus | Security & compliance | Who did what? |
| Example | Who changed the security group settings? | Who deleted an EC2 instance? |

üìå **Example:**  
- If you want to know **WHO made a change**, use CloudTrail.  
- If you want to know **WHAT changed**, use AWS Config.  

---

**Interviewer:** How do you set up AWS Config?  

### **8Ô∏è‚É£ How to Set Up AWS Config (Step-by-Step)**  
‚úÖ **Step 1:** Go to **AWS Config Console**  
‚úÖ **Step 2:** Click **Get Started**  
‚úÖ **Step 3:** Select resources to track (EC2, S3, IAM, etc.)  
‚úÖ **Step 4:** Choose where to store logs (S3 bucket)  
‚úÖ **Step 5:** Set up **Config Rules** (e.g., `restricted-ssh`)  
‚úÖ **Step 6:** Enable notifications with **Amazon SNS**  

üìå **Outcome:** AWS Config starts tracking changes and alerts you if something is wrong.  

---

**Interviewer:** When should we use AWS Config?  

### **9Ô∏è‚É£ When to Use AWS Config?**  

| **Scenario** | **Use AWS Config?** |
|-------------|------------------|
| Auditing security configurations | ‚úÖ Yes |
| Tracking EC2 instance types | ‚úÖ Yes |
| Logging API activity | ‚ùå No (Use AWS CloudTrail) |

üìå **If you need to check if AWS resources follow security policies, use AWS Config.**  

---

**Interviewer:** What is the cost of AWS Config?  

### **üîü AWS Config Pricing (Simple Explanation)**  
üí∞ **Charges depend on:**  
- Number of **recorded configurations**.  
- Number of **rule evaluations**.  
- Storage for **history logs (Amazon S3)**.  

üìå **Example Pricing:**  
- $0.003 per configuration recorded.  
- $0.001 per rule evaluation.  

üîπ *"If you track 100 resources with 10 rules, it might cost a few dollars per month."*  

---

## **Final Answer Summary** (For Quick Recall)  

üîπ **AWS Config is like a security camera** for your AWS environment.  
üîπ It **tracks changes**, **checks compliance**, and **sends alerts** if something is wrong.  
üîπ It uses **rules** (Managed & Custom) to enforce best practices.  
üîπ It integrates with **SNS, CloudTrail, and Lambda** for automation.  
üîπ It helps companies **audit their AWS resources** and **enforce security policies**.  

---

üí° **Tip:** If the interviewer asks **"Have you worked with AWS Config?"**, you can say:  
*"Yes! I have used AWS Config to track security changes, ensure compliance, and automate alerts for misconfigurations. I also integrated it with SNS for real-time notifications and Lambda for custom compliance rules."*  

